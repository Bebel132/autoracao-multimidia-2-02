<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/menu.css">
    <link rel="stylesheet" href="style/home.css">
</head>
<body>
    <div class="menu">
        <img src="assets/logo.svg" alt="" id="logo" class="active">
        <ul class="menu-itens">
            <a href="community.html">
                <li class="menu-item">COMUNIDADE</li>
            </a>
            <a href="friendsRequest.html">
                <li class="menu-item">PEDIDOS</li>
            </a>
            <a href="aboutUs.html">
                <li class="menu-item">SOBRE NÓS</li>
            </a>
            <li class="menu-item" id="logout"><img src="assets/doorIcon.png" alt=""></li>
        </ul>
    </div>
    <div class="content">
        <div class="gamesList">
            <ul class="gamesListContainer"></ul>
        </div>
        <div class="userProfile">
            <div class="profileContainer">
                <div class="userProfilePic">
                    <img src="" alt="" class="userPic">
                    <span class="changePhoto">ALTERAR FOTO</span>
                    <input type="file" id="fotoInput" accept="image/*" hidden>
                </div>
                <span id="profileMsg">Olá, tudo bem?</span>
                <h1 id="userName">Nome do Usuário</h1>
                <hr>
                <h2>Seus amigos</h2>
                <ul class="friendsList">
                </ul>
            </div>
        </div>
    </div>
    <script type="module" src="scripts/profile.js"></script>
    <script type="module">
        import api from "./scripts/apiHelper.js";

        const gamesListContainer = document.querySelector(".gamesListContainer");

        await api.get("/games").then(res => {
            res.forEach(game => {
                const li = document.createElement("li");
                li.classList.add("gameItem");
                const img = document.createElement("img");
                const h1 = document.createElement("h1");
                const div = document.createElement("div");
                const span1 = document.createElement("span");
                const span2 = document.createElement("span");
                const span3 = document.createElement("span");

                img.src = `http://localhost:5000/${game.foto}`;
                img.alt = game.nome;
                h1.textContent = game.nome;
                span1.textContent = `Gênero: ${game.genero}`;
                span2.textContent = `Plataforma: ${game.plataforma}`;
                span3.textContent = `Desenvolvedora: ${game.desenvolvedora}`;
                div.appendChild(span1);
                div.appendChild(span2);
                div.appendChild(span3);
                li.appendChild(img);
                li.appendChild(h1);
                li.appendChild(div);
                gamesListContainer.appendChild(li);
            });
        });
    </script>
</body>
</html>